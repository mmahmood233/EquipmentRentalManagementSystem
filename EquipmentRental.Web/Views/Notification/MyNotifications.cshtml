@model IEnumerable<ProjectDBClassLibrary.Model.NotificationUser>
@{
    ViewData["Title"] = "My Notifications";
    Layout = "~/Views/Shared/_Layout.cshtml";

    var general = Model.Where(n => n.Notification.Type == "General").ToList();
    var personal = Model.Where(n => n.Notification.Type != "General").ToList();
}

<div class="container mt-4">
    <h2 class="fw-bold text-primary mb-3">My Notifications</h2>

    <h4 class="mt-3">🔹 General Announcements</h4>
    @if (!general.Any())
    {
            <div class="alert alert-secondary">No general notifications.</div>
    }
    else
    {
            <div class="list-group mb-4">
            @foreach (var nu in general)
            {
                        <div class="list-group-item @(nu.Notification.Status ? "text-muted" : "text-primary fw-bold")">
                            <div>@nu.Notification.Message</div>
                        </div>
            }
            </div>
    }

    <h4 class="mt-4">🔸 Personal / System Notifications</h4>
    @if (!personal.Any())
    {
            <div class="alert alert-secondary">No personal notifications.</div>
    }
    else
    {
            <div class="list-group">
            @foreach (var nu in personal)
            {
                        <div class="list-group-item @(nu.Notification.Status ? "text-muted" : "text-primary fw-bold")">
                            <div class="d-flex justify-content-between">
                                <div>
                                    <strong>@nu.Notification.Type</strong>
                                    <div>@nu.Notification.Message</div>
                                </div>
                        @if (!nu.Notification.Status)
                        {
                                        <form asp-action="MarkAsRead" method="post">
                                            <input type="hidden" name="notificationUserId" value="@nu.NotificationUserId" />
                                            <button type="submit" class="btn btn-sm btn-outline-secondary">Mark as Read</button>
                                        </form>
                        }
                            </div>
                        </div>
            }
            </div>
    }
</div>
